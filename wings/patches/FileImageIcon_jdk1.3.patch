--- FileImageIcon.java  2002/05/07 14:04:06     1.1.2.3
+++ FileImageIcon.java  2002/04/02 09:37:33     1.1.2.2
@@ -14,15 +14,13 @@
 
 package org.wings;
 
-import java.awt.image.BufferedImage;
-import java.io.ByteArrayInputStream;
+import java.awt.Image;
 import java.io.IOException;
 import java.io.File;
 import java.io.InputStream;
 import java.io.OutputStream;
 
 import javax.swing.ImageIcon;
-import javax.imageio.ImageIO;
 
 import org.wings.session.SessionManager;
 import org.wings.externalizer.ExternalizeManager;
@@ -106,10 +104,9 @@
             bufferResource();
             
             if ( buffer!=null && buffer.isValid()) {
-                BufferedImage image = 
-                    ImageIO.read(new ByteArrayInputStream(buffer.getBytes()));
-                width = image.getWidth();
-                height = image.getHeight();
+                ImageIcon icon = new ImageIcon(buffer.getBytes());
+                width  = icon.getIconWidth();
+                height = icon.getIconHeight();
             }
         } catch ( Throwable e ) {
             // is not possible to calc Dimensions
